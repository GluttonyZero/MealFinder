(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89683,e=>{"use strict";e.s(["default",()=>i],89683);var t=e.i(43476),r=e.i(71645);let a=e=>{let{onAddIngredient:a,disabled:s=!1}=e,[i,n]=(0,r.useState)(""),[l,o]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[h,u]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{u(!0);try{let e=await fetch("https://www.themealdb.com/api/json/v1/1/list.php?i=list"),t=await e.json();if(t.meals){let e=t.meals.map(e=>e.strIngredient);c(e)}}catch(e){console.error("Failed to load ingredients:",e)}finally{u(!1)}})()},[]),(0,r.useEffect)(()=>{if(!i)return void o([]);o(d.filter(e=>e.toLowerCase().includes(i.toLowerCase())).slice(0,10))},[i,d]),(0,t.jsxs)("div",{className:"mb-4 w-full relative",children:[(0,t.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"Search for ingredients...",className:"border border-gray-600 p-3 w-full rounded bg-gray-700 text-white placeholder-gray-400",disabled:s||h}),h&&(0,t.jsx)("div",{className:"absolute right-3 top-3",children:(0,t.jsx)("div",{className:"loading-spinner"})}),l.length>0&&(0,t.jsx)("ul",{className:"absolute z-10 border border-gray-600 bg-gray-800 max-h-40 overflow-y-auto w-full rounded mt-1 shadow-lg",children:l.map(e=>(0,t.jsx)("li",{className:"cursor-pointer hover:bg-gray-700 p-3 text-white border-b border-gray-600 last:border-b-0",onClick:()=>(e=>{try{a(e),n(""),o([])}catch(e){console.error("Failed to add ingredient:",e)}})(e),children:e},e))})]})},s="https://mealfinder-0tmr.onrender.com";function i(e){let{user:i,onInventoryChange:n}=e,[l,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[h,u]=(0,r.useState)(""),m=(0,r.useCallback)(async()=>{c(!0),u("");try{let e=await fetch("".concat(s,"/api/users/").concat(i.id,"/inventory"));if(!e.ok)throw Error("Failed to load inventory");let t=await e.json();o(Array.isArray(t)?t:[])}catch(e){u("Failed to load inventory"),console.error(e),o([])}finally{c(!1)}},[i.id]);(0,r.useEffect)(()=>{m()},[m]);let y=async e=>{c(!0),u("");try{let t=await fetch("".concat(s,"/api/users/").concat(i.id,"/inventory/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient:e})});if(!t.ok)throw Error("Failed to add ingredient");let r=await t.json();o(Array.isArray(r)?r:[]),null==n||n()}catch(e){u("Failed to add ingredient"),console.error(e)}finally{c(!1)}},g=async e=>{c(!0),u("");try{let t=await fetch("".concat(s,"/api/users/").concat(i.id,"/inventory/remove"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient:e})});if(!t.ok)throw Error("Failed to remove ingredient");let r=await t.json();o(Array.isArray(r)?r:[]),null==n||n()}catch(e){u("Failed to remove ingredient"),console.error(e)}finally{c(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your Inventory"}),h&&(0,t.jsx)("div",{className:"bg-red-500 text-white p-3 rounded mb-4",children:h}),(0,t.jsx)(a,{onAddIngredient:y,disabled:d}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:["Current Ingredients (",l.length,")"]}),0===l.length?(0,t.jsx)("div",{className:"text-gray-400 p-4 text-center bg-gray-700 rounded",children:"No ingredients in your inventory yet. Search above to add some!"}):(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:l.map(e=>(0,t.jsxs)("div",{className:"bg-blue-600 text-white px-3 py-2 rounded flex items-center justify-between",children:[(0,t.jsx)("span",{className:"truncate",children:e}),(0,t.jsx)("button",{onClick:()=>g(e),disabled:d,className:"text-red-300 hover:text-white ml-2 disabled:opacity-50",title:"Remove ingredient",children:"âœ•"})]},e))})]}),d&&(0,t.jsxs)("div",{className:"mt-4 text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto"}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:"Updating inventory..."})]})]})}},77833,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),r=e.i(71645),a=e.i(89683);function s(){let[e,s]=(0,r.useState)(null),[i,n]=(0,r.useState)(!0),[l,o]=(0,r.useState)("");return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://mealfinder-0tmr.onrender.com","/api/users/1"));if(!e.ok)throw Error("Failed to fetch user data");let t=await e.json();s(t)}catch(e){console.error(e),o("Failed to load user data. Please check backend URL.")}finally{n(!1)}})()},[]),i)?(0,t.jsx)("div",{className:"text-white",children:"Loading..."}):l?(0,t.jsx)("div",{className:"text-red-500",children:l}):e?(0,t.jsxs)("div",{className:"p-8 bg-black min-h-screen",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4 text-white",children:"Inventory Page"}),(0,t.jsx)(a.default,{user:e})]}):(0,t.jsx)("div",{className:"text-white",children:"No user found"})}}]);