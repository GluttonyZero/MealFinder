(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,t,a)=>{t.exports=e.r(9187)},63953,e=>{"use strict";e.s(["default",()=>l],63953);var t=e.i(48277),a=e.i(30668);let r=e=>{let{onAddIngredient:r,disabled:s=!1}=e,[l,i]=(0,a.useState)(""),[n,o]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[h,g]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{g(!0);try{let e=await fetch("https://www.themealdb.com/api/json/v1/1/list.php?i=list"),t=await e.json();if(t.meals){let e=t.meals.map(e=>e.strIngredient);c(e)}}catch(e){console.error("Failed to load ingredients:",e)}finally{g(!1)}})()},[]),(0,a.useEffect)(()=>{if(!l)return void o([]);o(d.filter(e=>e.toLowerCase().includes(l.toLowerCase())).slice(0,10))},[l,d]),(0,t.jsxs)("div",{className:"mb-4 w-full relative",children:[(0,t.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Search for ingredients...",className:"border border-gray-600 p-3 w-full rounded bg-gray-700 text-white placeholder-gray-400",disabled:s||h}),h&&(0,t.jsx)("div",{className:"absolute right-3 top-3",children:(0,t.jsx)("div",{className:"loading-spinner"})}),n.length>0&&(0,t.jsx)("ul",{className:"absolute z-10 border border-gray-600 bg-gray-800 max-h-40 overflow-y-auto w-full rounded mt-1 shadow-lg",children:n.map(e=>(0,t.jsx)("li",{className:"cursor-pointer hover:bg-gray-700 p-3 text-white border-b border-gray-600 last:border-b-0",onClick:()=>(e=>{try{r(e),i(""),o([])}catch(e){console.error("Failed to add ingredient:",e)}})(e),children:e},e))})]})},s="https://mealfinder-0tmr.onrender.com";function l(e){let{user:l,onInventoryChange:i}=e,[n,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(!1),[h,g]=(0,a.useState)("");(0,a.useEffect)(()=>{m()},[l]);let m=async()=>{c(!0),g("");try{let e=await fetch("".concat(s,"/api/users/").concat(l.id,"/inventory"));if(!e.ok)throw Error("Failed to load inventory");let t=await e.json();o(Array.isArray(t)?t:[])}catch(e){g("Failed to load inventory"),console.error(e),o([])}finally{c(!1)}},u=async e=>{c(!0),g("");try{let t=await fetch("".concat(s,"/api/users/").concat(l.id,"/inventory/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient:e})});if(!t.ok)throw Error("Failed to add ingredient");let a=await t.json();o(Array.isArray(a)?a:[]),null==i||i()}catch(e){g("Failed to add ingredient"),console.error(e)}finally{c(!1)}},x=async e=>{c(!0),g("");try{let t=await fetch("".concat(s,"/api/users/").concat(l.id,"/inventory/remove"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient:e})});if(!t.ok)throw Error("Failed to remove ingredient");let a=await t.json();o(Array.isArray(a)?a:[]),null==i||i()}catch(e){g("Failed to remove ingredient"),console.error(e)}finally{c(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your Inventory"}),h&&(0,t.jsx)("div",{className:"bg-red-500 text-white p-3 rounded mb-4",children:h}),(0,t.jsx)(r,{onAddIngredient:u,disabled:d}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:["Current Ingredients (",n.length,")"]}),0===n.length?(0,t.jsx)("div",{className:"text-gray-400 p-4 text-center bg-gray-700 rounded",children:"No ingredients in your inventory yet. Search above to add some!"}):(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:n.map(e=>(0,t.jsxs)("div",{className:"bg-blue-600 text-white px-3 py-2 rounded flex items-center justify-between",children:[(0,t.jsx)("span",{className:"truncate",children:e}),(0,t.jsx)("button",{onClick:()=>x(e),disabled:d,className:"text-red-300 hover:text-white ml-2 disabled:opacity-50",title:"Remove ingredient",children:"✕"})]},e))})]}),d&&(0,t.jsxs)("div",{className:"mt-4 text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto"}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:"Updating inventory..."})]})]})}},24086,e=>{"use strict";e.s(["default",()=>n],24086);var t=e.i(48277),a=e.i(30668),r=e.i(96086),s=e.i(63953);let l="https://mealfinder-0tmr.onrender.com";function i(e){let{user:r}=e,[s,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),m=async e=>{c(!0),g(""),i(null);try{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch meals");let a=await t.json();a.meals&&Array.isArray(a.meals)?i(a.meals):"string"==typeof a?g(a):g("No meals found. Try different ingredients!")}catch(e){g("Failed to fetch meals. Please try again."),console.error(e)}finally{c(!1)}},u=async()=>{await m("".concat(l,"/api/challenge/from-inventory/").concat(r.id))},x=async()=>{await m("".concat(l,"/api/challenge/random"))},p=async()=>{if(!n.trim())return void g("Please enter a cuisine type (e.g., Italian, Mexican)");await m("".concat(l,"/api/challenge/by-area?area=").concat(encodeURIComponent(n)))},y=async()=>{await m("".concat(l,"/api/challenge/budget"))},b=async e=>{try{let a=await fetch("".concat(l,"/api/challenge/lookup/").concat(e)),r=await a.json();if(r.meals&&r.meals[0]){var t;let e=r.meals[0];alert("Recipe: ".concat(e.strMeal,"\n\nInstructions: ").concat(null==(t=e.strInstructions)?void 0:t.substring(0,200),"..."))}}catch(e){console.error("Failed to fetch recipe details:",e)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Meal Challenges"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,t.jsx)("button",{onClick:u,disabled:d,className:"bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg disabled:opacity-50 transition-colors",children:"🏠 From My Inventory"}),(0,t.jsx)("button",{onClick:x,disabled:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white p-4 rounded-lg disabled:opacity-50 transition-colors",children:"🎲 Surprise Me"}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:n,onChange:e=>o(e.target.value),placeholder:"Enter cuisine (e.g., Italian, Mexican)",className:"flex-1 p-3 border border-gray-600 rounded bg-gray-700 text-white",disabled:d}),(0,t.jsx)("button",{onClick:p,disabled:d||!n.trim(),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded disabled:opacity-50 transition-colors",children:"⏱️ Time Crunch"})]})}),(0,t.jsx)("button",{onClick:y,disabled:d,className:"md:col-span-2 bg-pink-600 hover:bg-pink-700 text-white p-4 rounded-lg disabled:opacity-50 transition-colors",children:"💰 Budget Meals"})]}),h&&(0,t.jsx)("div",{className:"bg-red-500 text-white p-3 rounded mb-4",children:h}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Suggested Meals"}),d&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Finding delicious recipes..."})]}),s&&!d&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,t.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[e.strMealThumb&&(0,t.jsx)("img",{src:e.strMealThumb,alt:e.strMeal,className:"w-full h-48 object-cover rounded mb-3"}),(0,t.jsx)("h4",{className:"font-bold text-lg mb-2",children:e.strMeal}),(0,t.jsx)("button",{onClick:()=>b(e.idMeal),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"View Recipe"})]},e.idMeal))}),!s&&!d&&!h&&(0,t.jsx)("div",{className:"text-gray-400 p-8 text-center bg-gray-700 rounded",children:"Select a challenge above to discover new recipes!"})]})]})}function n(){let[e,l]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(""),h=(0,r.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("mealquest_userId");if(!e)return void h.push("/MealFinder/login");g(e)},[h]);let g=async e=>{try{let t=await fetch("".concat("https://mealfinder-0tmr.onrender.com","/api/users/").concat(e));if(!t.ok)throw Error("Failed to fetch user");let a=await t.json();l(a)}catch(e){console.error(e),c("Failed to load user data"),h.push("/MealFinder/login")}finally{o(!1)}},m=async()=>{(null==e?void 0:e.id)&&await g(e.id.toString())};return n?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:(0,t.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):e?(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8 p-4 bg-gray-800 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"🍽️ MealQuest"}),(0,t.jsxs)("p",{className:"text-gray-400",children:["Welcome back, ",e.username,"!"]})]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("mealquest_userId"),h.push("/MealFinder/login")},className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition-colors",children:"Logout"})]}),d&&(0,t.jsx)("div",{className:"bg-red-500 text-white p-3 rounded mb-4",children:d}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsx)("div",{className:"bg-gray-800 p-6 rounded-lg",children:(0,t.jsx)(s.default,{user:e,onInventoryChange:m})}),(0,t.jsx)("div",{className:"bg-gray-800 p-6 rounded-lg",children:(0,t.jsx)(i,{user:e})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:(0,t.jsx)("div",{className:"text-red-500",children:"Failed to load user data"})})}}]);