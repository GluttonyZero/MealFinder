(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},89683,e=>{"use strict";e.s(["default",()=>i],89683);var t=e.i(47167),a=e.i(43476),s=e.i(71645);let r=e=>{let{onAddIngredient:t,disabled:r=!1}=e,[l,i]=(0,s.useState)(""),[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)([]),[h,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{u()},[]);let u=async()=>{g(!0);try{let e=await fetch("https://www.themealdb.com/api/json/v1/1/list.php?i=list"),t=await e.json();if(t.meals){let e=t.meals.map(e=>e.strIngredient);c(e)}}catch(e){console.error("Failed to load ingredients:",e)}finally{g(!1)}};return(0,s.useEffect)(()=>{if(!l)return void o([]);o(d.filter(e=>e.toLowerCase().includes(l.toLowerCase())).slice(0,10))},[l,d]),(0,a.jsxs)("div",{className:"mb-4 w-full relative",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Search for ingredients...",className:"border border-gray-600 p-3 w-full rounded bg-gray-700 text-white placeholder-gray-400",disabled:r||h}),h&&(0,a.jsx)("div",{className:"absolute right-3 top-3",children:(0,a.jsx)("div",{className:"loading-spinner"})}),n.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 border border-gray-600 bg-gray-800 max-h-40 overflow-y-auto w-full rounded mt-1 shadow-lg",children:n.map(e=>(0,a.jsx)("li",{className:"cursor-pointer hover:bg-gray-700 p-3 text-white border-b border-gray-600 last:border-b-0",onClick:()=>{t(e),i(""),o([])},children:e},e))})]})},l=t.default.env.NEXT_PUBLIC_API_BASE_URL;function i(e){let{user:t,onInventoryChange:i}=e,[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1),[h,g]=(0,s.useState)("");(0,s.useEffect)(()=>{u()},[t]);let u=async()=>{try{let e=await fetch("http://".concat(l,"/api/users/").concat(t.id,"/inventory"));if(e.ok){let t=await e.json();o(Array.isArray(t)?t:[])}}catch(e){g("Failed to load inventory"),console.error("Failed to load inventory:",e),o([])}},m=async e=>{c(!0),g("");try{let a=await fetch("http://".concat(l,"/api/users/").concat(t.id,"/inventory/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){let e=await a.json();o(Array.isArray(e)?e:[]),null==i||i()}else g("Failed to add ingredient")}catch(e){g("Network error. Please try again."),console.error("Failed to add ingredient:",e)}finally{c(!1)}},x=async e=>{c(!0),g("");try{let a=await fetch("http://".concat(l,"/api/users/").concat(t.id,"/inventory/remove"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){let e=await a.json();o(Array.isArray(e)?e:[]),null==i||i()}else g("Failed to remove ingredient")}catch(e){g("Network error. Please try again."),console.error("Failed to remove ingredient:",e)}finally{c(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your Inventory"}),h&&(0,a.jsx)("div",{className:"bg-red-500 text-white p-3 rounded mb-4",children:h}),(0,a.jsx)(r,{onAddIngredient:m,disabled:d}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:["Current Ingredients (",n.length,")"]}),0===n.length?(0,a.jsx)("div",{className:"text-gray-400 p-4 text-center bg-gray-700 rounded",children:"No ingredients in your inventory yet. Search above to add some!"}):(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:n.map(e=>(0,a.jsxs)("div",{className:"bg-blue-600 text-white px-3 py-2 rounded flex items-center justify-between",children:[(0,a.jsx)("span",{className:"truncate",children:e}),(0,a.jsx)("button",{onClick:()=>x(e),disabled:d,className:"text-red-300 hover:text-white ml-2 disabled:opacity-50",title:"Remove ingredient",children:"✕"})]},e))})]}),d&&(0,a.jsxs)("div",{className:"mt-4 text-center",children:[(0,a.jsx)("div",{className:"loading-spinner mx-auto"}),(0,a.jsx)("p",{className:"text-gray-400 mt-2",children:"Updating inventory..."})]})]})}},81789,e=>{"use strict";e.s(["default",()=>d],81789);var t=e.i(47167),a=e.i(43476),s=e.i(71645),r=e.i(18566),l=e.i(89683);let i=t.default.env.NEXT_PUBLIC_API_BASE_URL;function n(e){let{user:t}=e,[r,l]=(0,s.useState)(null),[n,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),u=async e=>{c(!0),g(""),l(null);try{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch meals");let a=await t.json();a.meals&&Array.isArray(a.meals)?l(a.meals):"string"==typeof a?g(a):g("No meals found. Try different ingredients!")}catch(e){g("Failed to fetch meals. Please try again."),console.error(e)}finally{c(!1)}},m=async()=>{await u("http://".concat(i,"/api/challenge/from-inventory/").concat(t.id))},x=async()=>{await u("http://".concat(i,"/api/challenge/random"))},p=async()=>{if(!n.trim())return void g("Please enter a cuisine type (e.g., Italian, Mexican)");await u("http://".concat(i,"/api/challenge/by-area?area=").concat(encodeURIComponent(n)))},y=async()=>{await u("http://".concat(i,"/api/challenge/budget"))},b=async e=>{try{let a=await fetch("http://".concat(i,"/api/challenge/lookup/").concat(e)),s=await a.json();if(s.meals&&s.meals[0]){var t;let e=s.meals[0];alert("Recipe: ".concat(e.strMeal,"\n\nInstructions: ").concat(null==(t=e.strInstructions)?void 0:t.substring(0,200),"..."))}}catch(e){console.error("Failed to fetch recipe details:",e)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Meal Challenges"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:m,disabled:d,className:"bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg disabled:opacity-50 transition-colors",children:"🏠 From My Inventory"}),(0,a.jsx)("button",{onClick:x,disabled:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white p-4 rounded-lg disabled:opacity-50 transition-colors",children:"🎲 Surprise Me"}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{value:n,onChange:e=>o(e.target.value),placeholder:"Enter cuisine (e.g., Italian, Mexican)",className:"flex-1 p-3 border border-gray-600 rounded bg-gray-700 text-white",disabled:d}),(0,a.jsx)("button",{onClick:p,disabled:d||!n.trim(),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded disabled:opacity-50 transition-colors",children:"⏱️ Time Crunch"})]})}),(0,a.jsx)("button",{onClick:y,disabled:d,className:"md:col-span-2 bg-pink-600 hover:bg-pink-700 text-white p-4 rounded-lg disabled:opacity-50 transition-colors",children:"💰 Budget Meals"})]}),h&&(0,a.jsx)("div",{className:"bg-red-500 text-white p-3 rounded mb-4",children:h}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Suggested Meals"}),d&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Finding delicious recipes..."})]}),r&&!d&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>(0,a.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[e.strMealThumb&&(0,a.jsx)("img",{src:e.strMealThumb,alt:e.strMeal,className:"w-full h-48 object-cover rounded mb-3"}),(0,a.jsx)("h4",{className:"font-bold text-lg mb-2",children:e.strMeal}),(0,a.jsx)("button",{onClick:()=>b(e.idMeal),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"View Recipe"})]},e.idMeal))}),!r&&!d&&!h&&(0,a.jsx)("div",{className:"text-gray-400 p-8 text-center bg-gray-700 rounded",children:"Select a challenge above to discover new recipes!"})]})]})}let o=t.default.env.NEXT_PUBLIC_API_BASE_URL;function d(){let[e,t]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),[c,h]=(0,s.useState)(""),g=(0,r.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("mealquest_userId");if(!e)return void g.push("/login");u(e)},[g]);let u=async e=>{try{let a=await fetch("http://".concat(o,"/api/users/").concat(e));if(a.ok){let e=await a.json();t(e)}else h("Failed to load user data"),g.push("/login")}catch(e){h("Network error. Please try again."),console.error("Failed to fetch user:",e)}finally{d(!1)}},m=async()=>{e&&await u(e.id.toString())};return i?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):e?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8 p-4 bg-gray-800 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"🍽️ MealQuest"}),(0,a.jsxs)("p",{className:"text-gray-400",children:["Welcome back, ",e.username,"!"]})]}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("mealquest_userId"),g.push("/login")},className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition-colors",children:"Logout"})]}),c&&(0,a.jsx)("div",{className:"bg-red-500 text-white p-3 rounded mb-4",children:c}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{className:"bg-gray-800 p-6 rounded-lg",children:(0,a.jsx)(l.default,{user:e,onInventoryChange:m})}),(0,a.jsx)("div",{className:"bg-gray-800 p-6 rounded-lg",children:(0,a.jsx)(n,{user:e})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:(0,a.jsx)("div",{className:"text-red-500",children:"Failed to load user data"})})}}]);